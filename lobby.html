<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lobby - Last Man Standing</title>
  <link rel="stylesheet" href="css/lobby.css">
  <link rel="icon" href="favicon.ico" sizes="any">
  <meta name="theme-color" content="#8b27c4">

  <!-- PeerJS für P2P-Verbindung -->
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>

  <!-- Fallback für PeerJS -->
  <script>
    // Prüfe ob PeerJS geladen wurde, ansonsten lade alternative Version
    window.addEventListener('DOMContentLoaded', function() {
      if (typeof Peer === 'undefined') {
        console.warn('⚠️ PeerJS nicht gefunden, lade Alternative...');
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js';
        script.onerror = function() {
          console.error('❌ PeerJS konnte nicht geladen werden!');
          alert('Fehler: P2P-Bibliothek konnte nicht geladen werden. Bitte Seite neu laden oder überprüfen Sie Ihre Internetverbindung.');
        };
        script.onload = function() {
          console.log('✅ PeerJS Fallback erfolgreich geladen');
        };
        document.head.appendChild(script);
      } else {
        console.log('✅ PeerJS erfolgreich geladen');
      }
    });
  </script>
</head>
<body>

  <!-- Host Info (Top Left) -->
  <div class="host-info">
    <div class="host-label">👑 HOST</div>
    <div class="host-card">
      <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Host" alt="Host Avatar" class="host-avatar" id="host-avatar">
      <div class="host-name" id="host-name">Host lädt...</div>
    </div>
  </div>

  <!-- Action Buttons (Top Right) -->
  <button class="leave-lobby-btn" id="leave-lobby-btn" title="Lobby verlassen">
    <span class="leave-icon">🚪</span>
  </button>
  <button class="fullscreen-btn" id="fullscreen-btn" title="Vollbild">
    <span>⛶</span>
  </button>

  <!-- Main Content -->
  <div class="quiz-container">
    <div class="quiz-header">
      <h1 class="quiz-title">Last Man Standing</h1>
      <div class="lobby-code-display" id="lobby-code-container">
        <span class="code-label">Lobby-Code:</span>
        <span class="code-value" id="lobby-code-display">------</span>
      </div>
    </div>

    <div class="question-area">
      <div class="waiting-message">
        <div class="spinner"></div>
        <h2>Warte auf Spieler...</h2>
        <p>Teile den Lobby-Code mit deinen Freunden!</p>
      </div>

      <!-- Host Controls -->
      <div class="host-controls" id="host-controls" style="display: none;">
        <button class="btn btn-start" id="start-quiz-btn">
          <span class="btn-icon">▶️</span>
          Quiz starten
        </button>
      </div>
    </div>
  </div>

  <!-- Players Area (Bottom) -->
  <div class="players-area">
    <div class="players-container" id="players-container">
      <!-- Players werden hier dynamisch hinzugefügt -->
    </div>
  </div>

  <!-- Neue Buttons -->
  <div class="button-container">
    <button class="btn btn-correct" style="background-color: green; color: white;" title="Richtig">
      <span class="btn-icon">✔️</span>
    </button>
    <button class="btn btn-wrong" style="background-color: red; color: white;" title="Falsch">
      <span class="btn-icon">❌</span>
    </button>
  </div>

  <script src="js/lobby.js"></script>
</body>
</html>
